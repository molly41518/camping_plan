@model campingplan.Models.product
@using campingplan.App_Class

@{
    ViewBag.Title = "ProductDetail";


}

@section styles{
    <link rel="stylesheet" href="@Url.Content("~/Content/camping/fullcalendar.min.css")" />
    @*<link rel="stylesheet" href="@Url.Content("~/Content/camping/fullcalendar.print.css")" />*@
}

@section scripts{
    <script src="@Url.Content("~/Scripts/camping/fullcalendar.js")"></script>
    <script src="@Url.Content("~/Scripts/camping/moment.min.js")"></script>
    <script src="@Url.Content("~/Scripts/camping/zh-tw.js")"></script>
    <script>

        document.addEventListener('DOMContentLoaded', function () {
            var calendarEl = document.getElementById('calendar');
            var calendar = new FullCalendar.Calendar(calendarEl, {
                initialView: 'dayGridMonth',
                titleFormat: { // will produce something like "Tuesday, September 18, 2018"
                    month: 'short',
                    year: 'numeric',
                },
                dayHeaderFormat: { weekday: 'short' },
                //locale: 'zh-tw',
                handleWindowResize: true,
                events: "@Url.Action("GetStockEvent", "Product", new { id = Model.pno })"
                //events: [{title: 's', start: '2020-12-04'}]
            });
            calendar.render();
        });

    </script>
}


<header>
    <div class="container">
        <div id="carouselExampleIndicators"
             class="carousel slide"
             data-ride="carousel">
            <ol class="carousel-indicators">
                <li data-target="#carouselExampleIndicators"
                    data-slide-to="0"
                    class="active"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="1"></li>
                <li data-target="#carouselExampleIndicators" data-slide-to="2"></li>
            </ol>
            <div class="carousel-inner">
                <div class="carousel-item active">
                    <img src="~/Content/images/product/C0001.jpeg"
                         class="d-block w-100"
                         alt="" />
                </div>
                <div class="carousel-item">
                    <img src="~/Content/images/product/C0001.jpeg"
                         class="d-block w-100"
                         alt="" />
                </div>
                <div class="carousel-item">
                    <img src="~/Content/images/product/C0001.jpeg"
                         class="d-block w-100"
                         alt="" />
                </div>
            </div>
            <a class="carousel-control-prev"
               href="#carouselExampleIndicators"
               role="button"
               data-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="sr-only">Previous</span>
            </a>
            <a class="carousel-control-next"
               href="#carouselExampleIndicators"
               role="button"
               data-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="sr-only">Next</span>
            </a>
        </div>
    </div>
</header>

<div class="container mt-3">
    <div class="row">
        <div class="col-lg-9">
            <span>@Model.plocation</span>
            <h1>@Model.pname</h1>
            <span>4.5</span>
            <span>20人評價</span>
            <span><a href="">加入願望清單</a></span>
            <hr />
            <ul class="selectdate">
                <li class="camptype align-self-center justify-content-center">
                    <a>高海拔</a>
                </li>
                <li class="camptype">
                    <a>中部營區</a>
                </li>
                <li class="camptype">
                    <a>近河邊</a>
                </li>
                <li class="camptype">
                    <a>兒童遊戲區</a>
                </li>
            </ul>
            <hr />
            <h2 class="my-5">營地須知</h2>
            <p>
                @Html.Raw(Model.pdescription.Replace(Environment.NewLine, "<br />"))
            </p>
            <h2 class="my-5">夜衝說明</h2>
            <p>
                總體大幅寶貝醫院下一頁原因附件協調硬盤為何實際上考試，的說循環社會如果實力轉變，博士不去加拿大這些第一章出租為此那就他對主任授權體會，把他所以群眾每月主演長沙提交新臺幣選擇，選項對著留下功能，規格監督查看生產反正工藝地址都能法律責任，請教刪除內容有的，空氣位置每日清除求購鑒定庫存，他對聲明檢測存款更大誘惑三大這款空間辦公，監管不起本文真是，就是獨特股份有限公司練習老師先生家庭修改瀏覽次數光臨辦公。
            </p>
            <h2 class="my-5">營地地址</h2>
            <iframe src="@Model.pmapurl"
                    width="825"
                    height="300"
                    frameborder="0"
                    style="border: 0"
                    allowfullscreen=""
                    aria-hidden="false"
                    tabindex="0">
            </iframe>

            <h2 class="my-5">預定日期</h2>

            @{
                DateTime startday = DateTime.Today;
                DateTime endday = startday.AddDays(1);
                int qty = ViewBag.qty == null ? 1 : ViewBag.qty;
                if (ViewBag.startday != null && ViewBag.endday != null)
                {
                    startday = ViewBag.startday;
                    endday = ViewBag.endday;
                }
            }
        <p>@startday</p>
        <p>@endday</p>
        <p>@qty</p>


            <h2 class="my-5">營地介紹</h2>
            @{
                var productdetaildict = Shop.GetDictProductTypeDetail(Model.product_typedetail, qty, startday, endday);

                foreach (var area in productdetaildict)
                {
                    <div class="card">
                        <div class="card-header">@area.Key</div>
                        <div class="card-body">
                            <div class="container">
                                <div class="row">
                                    @{
                                        foreach (var detail in area.Value)
                                        { <div class="col-lg-4">
                                                <img src="/img/bg-2.jpg" class="img-fluid" />
                                            </div>
                                            <div class="col-lg-8">
                                                <h5 class="card-title">@detail.ptype_name</h5>
                                                <text class="card-text">@detail.ptype_dep</text>
                                                <p class="card-text">@detail.ptype_price</p>
                                                <div class="row">
                                                    <div class="col-lg-9"><span>剩餘位置 10</span></div>
                                                    <div class="col-lg-3">
                                                     @Html.ActionLink("訂購", "AddToCart","Product",new{pno = detail.pno , ptype_no = detail.ptype_no ,startday = startday ,endday = endday, qty = qty },new { @class="btn btn-primary"})
                                                    </div>
                                                </div>
                                            </div>
                                        }
                                    }
                                </div>
                            </div>
                        </div>
                    </div>

                }
            }

        </div>

        <div class="col-lg-3">
            <div class="card">
                <div class="card-header">空位狀況</div>
                <div id="calendar"></div>
            </div>
        </div>
    </div>
</div>

